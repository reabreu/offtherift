<section data-ng-controller="ItemsController" data-ng-init="init()">
    <div class="page-header">
        <h1>Items</h1>
    </div>
    <div class="panel panel-default panel-items">
        <div class="panel-heading">
            <h2>Items Panel</h2>
        </div>
        <div class="panel-body">
            <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-1 control-label label-input-sm pull-left" for="selector1">Patch</label>
                        <div class="col-sm-4">
                            <select
                            ng-model    = "formData.version"
                            class       = "form-control input-sm" 
                            ng-change   = "searchItems()"
                            >
                            <option value=""></option>
                            <option ng-repeat="patch in patches | filter:{ synched: true }" value="{{patch.version}}">{{patch.version}}</option>
                        </select>
                    </div>
                    <label class="col-sm-1 control-label label-input-sm" for="focusedinput">Name</label>
                    <div class="col-sm-4">
                        <input 
                        type        = "text" 
                        id          = "focusedinput" 
                        class       = "form-control input-sm" 
                        ng-model    = "formData.name" 
                        ng-keypress = "($event.which === 13)?searchItems($event):0"
                        >
                    </div>
                    <label class="col-sm-1 control-label label-input-sm">State</label>
                    <div class="col-sm-1">
                        <input
                        bs-switch
                        type            = "checkbox"
                        ng-model        = "formData.enabled"
                        type            = "checkbox"
                        switch-size     = "mini"
                        class           = "label-input-sm pull-right"
                        ng-change       = "searchItems()"
                        />
                    </div>
                </div>
            </form>
            <hr>
            <div class="table-responsive">
                <table 
                class                           = "table table-striped table-vam table-bordered mb0"
                infinite-scroll                 = "loadMore();$event.stopPropagation()"
                infinite-scroll-disabled        = "busy"
                infinite-scroll-immediate-check = "false"
                >
                <thead>
                    <tr>
                        <th>Avatar</th>
                        <th>Name</th>
                        <th>Enabled</th>
                        <th>Version</th>
                    </tr>
                </thead>
                    <tbody>
                        <tr 
                        ng-show         = "items.length" 
                        data-ng-repeat  = "item in items" 
                        >
                            <td><img class="avatar" alt="avatar" ng-src="{{ item.image.full | ddragon: item.version:'item'}}"></td>
                            <td>{{item.name}}</td>
                            <td ng-class="{ 'text-success':item.enabled, 'text-warning':!item.enabled  }" >{{item.enabled ? 'yes' : 'no'}}</td>
                            <td>
                                {{item.version}} 
                                <a
                                class           = "btn btn-default btn-xs pull-right" 
                                data-toggle     = "modal" 
                                href            = "#itemModal"
                                ng-click        = "setCurrentItemIndex($index)">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr ng-show = "!items.length && !busy" style="text-align:center">
                        <td colspan="4">No items fetched...Try setting some research params!</td>
                    </tr>
                    <tr  ng-show = "busy" style="text-align:center">
                        <td colspan="4">Searching <img class="loading-spinner-small" src="modules/core/img/loaders/loader.gif" alt=""></td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
    </div>
</div>

<div ng-include src="'modules/items/views/edit-item.client.view.html'"></div>

</section>



