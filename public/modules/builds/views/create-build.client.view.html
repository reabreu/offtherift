<section data-ng-controller="BuildsController" data-ng-init="init()" class="build-wrapper">
	<div class="container-fluid">
		<form class="form-horizontal" data-ng-submit="create()" novalidate id="build">
			<div class="form-group">
				<div class="col-xs-6">
					<input type="text" data-ng-model="build.name" id="name" class="form-control build-title" placeholder="Enter Build Name" required>
				</div>
				<div class="col-xs-6">
					<div class="row mt10">
						<!--<label class="col-xs-2">
							Status
						</label>
						<div class="col-xs-2">
							<span class="badge badge-success">Saved</span>
						</div>
						<label class="col-xs-2">Public</label>
						<div class="col-xs-4">
							<input
								bs-switch
								type            = "checkbox"
								ng-model        = "build.public"
								type            = "checkbox"
								switch-size     = "mini"
								ng-change       = "toggleEnabled(build)"
							/>
						</div>-->
						<a class="btn btn-success" href="#" ng-click="create()" ng-show="enabledView && evaluateBuildStatus()">Save this build!</a>
					</div>
				</div>
			</div>
			<div class="form-group">
				<label class="col-xs-1">Patch</label>
				<div class="col-xs-5">
					<select style="width:100%" ng-model = "data.selectedPatch" ng-change="getPatchInfo()" >
						<option ng-repeat="patch in data.patches | filter:{ synched: true }" value="{{patch.version}}">{{patch.version}}</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<div class="col-xs-12">
					<div style="width:5.5%;display:inline-block" ng-repeat="n in range(1,18)">
						<span ng-click="setLevel(n)" ng-class="{'badge-info': build.snapshot[data.currentSnapshot].level == n}" class="badge" style="width:90%;cursor:pointer;">{{n}}</span>
					</div>
				</div>
			</div>
			<div class="form-group" >
				<div class="col-lg-4 col-md-5 col-sm-6 col-xs-12">
					<div class="row">
						<div class="col-xs-4">
							<div class="champ-avatar" ng-click="openModal(data.champions)">
								<div class="overlay"></div>
								<img
									ng-class="{'undefined-champion' : data.selectedChampion == null}"
									style="cursor:pointer;width:80px;height:80px;"
									class="avatar pull-left"
									alt=""
									ng-src="{{ data.selectedChampion.image.full | ddragon: data.selectedChampion.version:'champion'}}"
								>
							</div>
						</div>
						<div class="col-xs-8">
							<h2 style="margin:0px;">{{data.selectedChampion.name}}</h2>
							<h3 style="margin:0px;">{{data.selectedChampion.title}}</h3>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<table class="table table-condensed mt10 mb0 table-stats" style="font-weight:200">
								<tbody>
									<tr>
										<td>Hitpoints</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].hp}}</strong></td>
										<td>Mana</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].mp}}</strong></td>
									</tr>
									<tr>
										<td>HP Regen per 5</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].hpregen}}</strong></td>
										<td>Mana Regen per 5</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].mpregen}}</strong></td>
									</tr>
									<tr>
										<td>Attack Damage</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].attackdamage}}</strong></td>
										<td>Ability Power</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].abilitypower}}</strong></td>
									</tr>
									<tr>
										<td>Armor Pen</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].armorpenetration | doubleStat}}</strong></td>
										<td>Magic Pen</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].magicpenetration | doubleStat}}</strong></td>
									</tr>
									<tr>
										<td>Lifesteal</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].lifesteal}} %</strong></td>
										<td>Spell Vamp</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].spellvamp}} %</strong></td>
									</tr>
									<tr>
										<td>Attack Speed</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].attackspeed}}</strong></td>
										<td>Cooldown Red</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].cooldownreduction}} %</strong></td>
									</tr>
									<tr>
										<td>Crit Chance</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].critchance}}</strong></td>
										<td>Armor</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].armor}}</strong></td>
									</tr>
									<tr>
										<td>Range</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].attackrange}}</strong></td>
										<td>Magic Resist</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].spellblock}}</strong></td>
									</tr>
									<tr>
										<td>Movement Speed</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].movespeed}}</strong></td>
										<td>Tenacity</td>
										<td><strong>{{build.calculatedStats[data.currentSnapshot].tenacity}} %</strong></td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col-xs-12">
						</div>
					</div>
				</div>
				<div class="col-lg-8 col-md-7 col-sm-6 col-xs-12">
                    <div id="accordionB" class="accordion-group">
                        <div class="panel accordion-item">
                            <item-section build="build" data="data"></item-section>
                        </div>
                        <div class="panel accordion-item">
                           	<runes-section build="build" data="data"></runes-section>
                        </div>
                        <div class="panel accordion-item">
                           	<masteries-section build="build" data="data"></masteries-section>
                        </div>
                    </div>
				</div>
			</div>
		</form>
	 </div>
</section>